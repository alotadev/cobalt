<html>
  <head>
    <!--Load the AJAX API-->
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript" src="https://www.google.com/jsapi"></script>
    <!-- Defines usage_by_module_data and usage_by_city_data and usage_by_hour_data -->
    <script type="text/javascript" src="../out/data.js"></script>

    <script type="text/javascript">

      // Load the Visualization API and some packages.
      google.charts.load('current', {'packages':['corechart', 'geochart', 'table']});

      // Set a callback to run when the Google Visualization API is loaded.
      google.charts.setOnLoadCallback(drawCharts);

      // Callback that invokes the chart-drawing functions.
      function drawCharts() {
        drawUsageByModulePieChart();
        drawUsageByCityGeoChart();
        drawUsageByHourColumnChart();
        drawPopularHelpQueriesColumnChart();
        drawPopularHelpQueriesInTabularForm();
      };

      function drawUsageByModulePieChart() {
        // Parse the data table.
        var data = new google.visualization.DataTable(usage_by_module_data);

        // Set chart options
        var options = {'title':'Top Modules by Usage',
                       'width':400,
                       'height':300};
        // Instantiate and draw our chart.
        var chart = new google.visualization.PieChart(document.getElementById('usage_by_module_chart'));
        chart.draw(data, options);
      };

      function drawUsageByCityGeoChart() {
        // Parse the data table.
        var data = new google.visualization.DataTable(usage_by_city_data)
        var options = {
          region: 'US',
          'width': 600,
          backgroundColor: '#81d4fa',
          datalessRegionColor: '#85e085',
          displayMode: 'markers',
          colorAxis: {colors: ['red', 'yellow', 'green']}
        };
        // Instantiate and draw our chart.
        var chart = new google.visualization.GeoChart(document.getElementById('usage_by_city'));
        chart.draw(data, options);
      }

      function drawUsageByHourColumnChart() {
        // Parse the data table.
        var data = new google.visualization.DataTable(usage_by_hour_data)
        var options = {
          title: 'Fuchsia average usage, by hour of the day, PST',
        };
         var options = {
           title: 'Fuchsia average usage, by hour of the day, PST',
           'width': 850,
           hAxis: {
             title: 'Hour of Day',
             gridlines: {count: 12},
           },
         };

        // Instantiate and draw our chart.
        var chart = new google.visualization.ColumnChart(document.getElementById('usage_by_hour'));
        chart.draw(data, options);
      }

      function drawPopularHelpQueriesColumnChart() {
        // Parse the data table.
        var data = new google.visualization.DataTable(popular_help_queries_data)
        var options = {
          title: 'Fuchsia top 50 popular help queries',
        };
        var options = {
          title: 'Fuchsia top 50 popular help queries',
          'width': 850,
          hAxis: {
            title: 'Popular help queries',
            gridlines: {count: 12},
          },
        };

        // Instantiate and draw our chart.
        var chart = new google.visualization.ColumnChart(document.getElementById('popular_help_queries'));
        chart.draw(data, options);
      }

      function drawPopularHelpQueriesInTabularForm() {
        // Parse the data table.
        var data = new google.visualization.DataTable(popular_help_queries_data);

        // Instantiate and draw our table.
        var table = new google.visualization.Table(document.getElementById('popular_help_queries_table'));

        // Set table options while drawing, and list the most popular queries in tabular form
        table.draw(data, {
            showRowNumber: false,
            sortAscending: false,
            allowHtml: true,
            alternatingRowStyle: true,
            page: 'enable',
            pageSize: 20,
            cssClassNames: {oddTableRow: 'odd_row', tableRow: 'table_row'}
        });
      }

    </script>
  </head>

  <body>
    <!--Div that will hold the pie chart-->
    <div id="usage_by_module_chart"></div>

    Fuchsia Usage and Ratings By City
    <div id="usage_by_city"></div>

    <div id="usage_by_hour"></div>

    <div id="popular_help_queries"></div>

    Fuchsia Top 50 Popular Help Queries
    <div id="popular_help_queries_table"></div>

  </body>
</html>
